{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nexport { fetchImages };\n\nconst API_KEY = '46160271-30a7facc458188e9573ebab80';\nconst BASE_URL = 'https://pixabay.com/api';\n\naxios.defaults.baseURL = BASE_URL;\n\nasync function fetchImages(params) {\n  const urlParams = { params };\n  const response = await axios.get(`/?key=${API_KEY}`, urlParams);\n\n  if (response.status !== 200) {\n    throw new Error(response.statusText);\n  }\n\n  if (response.data.totalHits === 0) {\n    throw new Error(\n      'Sorry, there are no images matching your search query. Please try again!'\n    );\n  }\n\n  return response.data;\n}\n","import SimpleLightbox from 'simplelightbox';\nimport iziToast from 'izitoast';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport {\n  createGallery,\n  removeGallery,\n  showLoader,\n  hideLoader,\n  showError,\n  showMessage,\n  showLoadMore,\n  hideLoadMore,\n  loadMoreEl,\n};\n\nconst galleryEl = document.querySelector('.gallery');\nconst loaderEl = document.querySelector('.loader');\nconst loadMoreEl = document.querySelector('.load-more button');\n\nconst optionsiziToast = {\n  messageColor: 'white',\n  position: 'topRight',\n  message: '',\n};\n\nfunction createGallery(hits) {\n  const galleryItems = hits\n    .map(image => {\n      const {\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      } = image;\n      return `\n            <a class=\"gallery-link\" href=\"${largeImageURL}\">\n                <img\n                    class=\"gallery-image\"\n                    src=\"${webformatURL}\"\n                    data-source=\"${largeImageURL}\"\n                    alt=\"${tags}\"\n                />\n                <div class=\"image-descrition\">\n                    <div>\n                        <span class=\"image-descrition-font\">Likes</span>\n                        <span class=\"image-descrition-font\">${likes}</span>\n                    </div>\n                    <div>\n                        <span class=\"image-descrition-font\">Views</span>\n                        <span class=\"image-descrition-font\">${views}</span>\n                    </div>\n                    <div>\n                        <span class=\"image-descrition-font\">Comments</span>\n                        <span class=\"image-descrition-font\">${comments}</span>\n                    </div>\n                    <div>\n                        <span class=\"image-descrition-font\">Downloads</span>\n                        <span class=\"image-descrition-font\">${downloads}</span>\n                    </div>\n                </div>\n            </a>`;\n    })\n    .join('');\n\n  galleryEl.innerHTML += galleryItems;\n  new SimpleLightbox('.gallery a', {\n    captionsData: 'alt',\n    captionDelay: 250,\n  }).refresh();\n}\n\nfunction removeGallery() {\n  galleryEl.innerHTML = '';\n}\n\nfunction showLoader() {\n  loaderEl.innerHTML = '<span></span>';\n}\n\nfunction hideLoader() {\n  loaderEl.innerHTML = '';\n}\n\nfunction showLoadMore() {\n  loadMoreEl.style.display = 'block';\n}\n\nfunction hideLoadMore() {\n  loadMoreEl.style.display = 'none';\n}\n\nfunction showError(error) {\n  optionsiziToast.message = error;\n  optionsiziToast.backgroundColor = 'red';\n  iziToast.error(optionsiziToast);\n}\n\nfunction showMessage(message) {\n  optionsiziToast.message = message;\n  iziToast.info(optionsiziToast);\n}\n","import { fetchImages } from './js/pixabay-api';\nimport {\n  createGallery,\n  removeGallery,\n  showError,\n  showMessage,\n  showLoader,\n  hideLoader,\n  showLoadMore,\n  hideLoadMore,\n  loadMoreEl,\n} from './js/render-functions';\n\nlet imageName = '';\nlet currentPage = 1;\nlet pages = 0;\nconst perPage = 15;\nconst imageForm = document.querySelector('.form-image');\n\nconst fetchParams = {\n  q: imageName,\n  image_type: 'photo',\n  orientation: 'horizontal',\n  safesearch: true,\n  page: currentPage,\n  per_page: perPage,\n};\n\nconst handleScrollView = () => {\n  const lastChild = document.querySelector('.gallery-link:last-child');\n  const scrollHeight = lastChild.getBoundingClientRect().height * 2;\n\n  window.scrollBy({\n    top: scrollHeight,\n    left: 0,\n    behavior: 'smooth',\n  });\n};\n\nconst onSubmitForm = async event => {\n  const { imageName } = event.currentTarget.elements;\n  fetchParams.q = imageName.value;\n\n  event.preventDefault();\n  event.currentTarget.reset();\n\n  removeGallery();\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const { hits, totalHits } = await fetchImages(fetchParams);\n    pages = Math.ceil(totalHits / perPage);\n    createGallery(hits);\n\n    if (pages > 1) {\n      showLoadMore();\n    }\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    hideLoader();\n  }\n};\n\nconst loadMore = async () => {\n  currentPage += 1;\n  fetchParams.page = currentPage;\n  hideLoadMore();\n  showLoader();\n\n  try {\n    const { hits } = await fetchImages(fetchParams);\n    createGallery(hits);\n    handleScrollView();\n\n    if (currentPage < pages) {\n      showLoadMore();\n    } else {\n      showMessage(\"We're sorry, but you've reached the end of search results.\");\n    }\n  } catch (error) {\n    showError(error.message);\n  } finally {\n    hideLoader();\n  }\n};\n\nimageForm.addEventListener('submit', onSubmitForm);\nloadMoreEl.addEventListener('click', loadMore);\n"],"names":["API_KEY","BASE_URL","axios","fetchImages","params","urlParams","response","galleryEl","loaderEl","loadMoreEl","optionsiziToast","createGallery","hits","galleryItems","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","SimpleLightbox","removeGallery","showLoader","hideLoader","showLoadMore","hideLoadMore","showError","error","iziToast","showMessage","message","imageName","currentPage","pages","perPage","imageForm","fetchParams","handleScrollView","scrollHeight","onSubmitForm","event","totalHits","loadMore"],"mappings":"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"}